(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();console.log("test");let r=JSON.parse(localStorage.getItem("habits")||"[]"),d=JSON.parse(localStorage.getItem("completed_habits")||"[]");const b=document.getElementById("habit_form");document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("habit_form");i(r),a.addEventListener("submit",o=>{o.preventDefault();const t=new FormData(o.target),n=Number(a.dataset.editId);if(n){const s=r.find(c=>c.id===n);s&&(s.name=t.get("habit_name"),s.targetStreak=t.get("target_streak")),delete a.dataset.editId}else{const s={id:Date.now(),name:t.get("habit_name"),targetStreak:Number(t.get("target_streak")),currentStreak:0,status:"Not Completed",history:[]};r.push(s)}l(),console.log(r),i(r),m(r),a.reset(),bootstrap.Modal.getInstance(document.getElementById("habitModal")).hide()})});let f=JSON.parse(localStorage.getItem("habits"));console.log(f);const i=a=>{const o=document.getElementById("habit_cards");o.innerHTML="";for(let t=0;t<a.length;t++){const n=a[t],e=document.createElement("div");e.className="col-md-4 mb-3",e.innerHTML=`
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">${n.name}</h5>
                    <p class="card-text">Target Streak: ${n.targetStreak}</p>
                    <p class="card-text">Current Streak: ${n.currentStreak}</p>
                    <p class="card-text">Status: ${n.status}</p>
                    <button class="btn btn-success complete-btn" data-id="${n.id}">Done</button>
                    <button class="btn btn-primary edit-btn" data-id="${n.id}">Edit</button>
                    <button class="btn btn-danger delete-btn" data-id="${n.id}">Remove</button>
                </div>
            </div>
        `,o.appendChild(e)}};i(r);document.getElementById("deleteBtn").addEventListener("click",()=>{const a=prompt("Enter the habit you want to delete: ");a&&(r=r.filter(o=>o.name!==a.trim()),l(),i(r),m(r))});function l(){localStorage.setItem("habits",JSON.stringify(r))}function g(){localStorage.setItem("completed_habits",JSON.stringify(d))}document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",a=>{if(a.target.classList.contains("complete-btn")){const o=Number(a.target.dataset.id),t=r.find(n=>n.id===o);if(t){const n=new Date().toISOString().split("T")[0];if(t.history.includes(n)){alert("You already completed this habit today!");return}t.history.push(n),t.currentStreak+=1,t.currentStreak>=t.targetStreak&&(t.status="Completed"),setTimeout(()=>{t.status==="Completed"&&(d.some(e=>e.id===t.id)||d.push(t),g(),u(d),r=r.filter(e=>e!==t),l(),i(r))},1e3),l(),i(r),m(r)}}}),document.addEventListener("click",a=>{if(a.target.classList.contains("delete-btn")){const o=Number(a.target.dataset.id);r=r.filter(t=>t.id!==o),l(),i(r),m(r)}}),document.addEventListener("click",a=>{if(a.target.classList.contains("edit-btn")){const o=Number(a.target.dataset.id),t=r.find(n=>n.id===o);if(t){document.getElementById("habit_name").value=t.name,document.getElementById("target_streak").value=t.targetStreak,b.dataset.editId=o;const n=document.getElementById("myModal");new bootstrap.Modal(n).show()}}}),document.addEventListener("click",a=>{a.target.classList.contains("reset_completed")&&(d=[],g(),u(d))})});const m=a=>{let o=0;a.length>0&&(o=Math.max(...a.map(e=>e.currentStreak)));const t=document.getElementById("longest_streak");t.innerHTML="";const n=document.createElement("div");n.innerHTML=`
            <p>Longest Streak: ${o}</p>
        `,t.appendChild(n)};m(r);const u=a=>{const o=document.getElementById("completed_habits");o.innerHTML="";for(let t=0;t<a.length;t++){const n=a[t],e=document.createElement("li");e.textContent=`${n.name} Target Streak: ${n.targetStreak}`,o.appendChild(e)}};u(d);
